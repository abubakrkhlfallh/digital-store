Enter# نظام المتجر الرقمي مع RLS

## نظرة عامة
هذا النظام يستخدم Row Level Security (RLS) في Supabase لتأمين البيانات على مستوى الصفوف.

## سياسات الأمان المطبقة

### 1. سياسات المسؤولين
- **القراءة**: المسؤولون فقط يمكنهم رؤية جميع المسؤولين
- **التحديث**: المسؤولون يمكنهم تحديث بياناتهم فقط
- **الحذف**: المسؤولون يمكنهم حذف حساباتهم فقط

### 2. سياسات العملاء
- **القراءة**: العملاء يرون بياناتهم فقط، المسؤولون يرون الجميع
- **التحديث**: العملاء يحدثون بياناتهم فقط
- **الحذف**: المسؤولون فقط يمكنهم حذف العملاء

### 3. سياسات المنتجات
- **القراءة**: الجميع يرون المنتجات النشطة
- **التعديل**: المسؤولون فقط يمكنهم إدارة المنتجات

### 4. سياسات الطلبات
- **القراءة**: العملاء يرون طلباتهم فقط، المسؤولون يرون الجميع
- **الإضافة**: العملاء يمكنهم إنشاء طلبات لأنفسهم فقط
- **التحديث**: المسؤولون فقط يمكنهم تحديث حالة الطلبات

### 5. سياسات السلة
- **الكل**: العملاء يمكنهم إدارة سلتهم فقط

## كيفية الاختبار

### اختبار 1: التحقق من RLS
```sql
-- حاول قراءة البيانات بدون تسجيل دخول
SELECT * FROM admins;
-- يجب أن تحصل على خطأ: "new row violates row-level security policy"
